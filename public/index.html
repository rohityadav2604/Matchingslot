<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.js" integrity="sha512-RT3IJsuoHZ2waemM8ccCUlPNdUuOn8dJCH46N3H2uZoY7swMn1Yn7s56SsE2UBMpjpndeZ91hm87TP1oU6ANjQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script src="http://localhost:3000/socket.io/socket.io.js"></script> -->
    <title>index</title>
</head>
<body onload = "init()">
    <form method="post" action="http://localhost:3000/slotbook">
        <label for="">bookingid</label>
        <input type="number" name="BookingId">
        <label for="">userid</label>
        <input type="number" name="UserId" id = "userid">
        <label for="">topic</label>
        <input type="text" name="Topic">
        <label for="">slotdateTime</label>
        <input type="text" name="SlotDateTime">
        <label for="">language preferred</label>
        <input type="text" name="LanguagePreffered">
        <label>time</label>
        <input type="number" name="Time">
        <label>email</label>
        <input type="text" name="email">
        <button type="submit" >submit</button>
    </form>
    <!-- <form method = "post" action= "http://localhost:3000/join">
        <label >useridjoin</label>
        <input type="number" name="UserId">
        <button type="submit" id = "join">join</button>
    </form> -->
   
        <label >useridjoin</label>
        <input type="number" name="UserId" , id="useridjoin">
        <button  id = "join">join</button>
        <script>
            function init()
            {
                var socket = new WebSocket("ws://localhost:3000");
                socket.onopen = function(event) {
                console.log("Connection established");
                // console.log(data);
            }
            socket.onmessage = function(e){
                console.log("msg");
                console.log(e.data);
            var server_message = e.data;
            console.log(typeof(server_message))
            let jsonMsg = JSON.parse(server_message)
            console.log(jsonMsg);
            let uid = document.querySelector("#useridjoin").value;
            
            // console.log(uid);

            if(jsonMsg.p1 == uid){
            window.location = '/video#'+jsonMsg.p1;
            }
            
            if(jsonMsg.p2 == uid){
            window.location = '/video#'+jsonMsg.p2;
            }
        
        }
            }
        </script>
    
    <script src="./script.js"></script>
    
    
  
    
</body>

</html>